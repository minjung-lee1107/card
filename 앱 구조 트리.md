# app.py êµ¬ì¡° íŠ¸ë¦¬

app.py
â”œâ”€ import
â”‚  â”œâ”€ streamlit as st
â”‚  â”œâ”€ pandas as pd
â”‚  â”œâ”€ plotly.express as px
â”‚  â”œâ”€ OpenAI
â”‚  â”œâ”€ re
â”‚  â”œâ”€ json
â”‚  â””â”€ difflib
â”‚
â”œâ”€ ë°ì´í„° ì „ì²˜ë¦¬ & ìë™ ë¶„ë¥˜
â”‚  â”‚
â”‚  â”œâ”€ ğŸ“‚ ì¹´í…Œê³ ë¦¬ ì •ì˜
â”‚  â”‚  â”œâ”€ RULES
â”‚  â”‚  â””â”€ CATEGORIES
â”‚  â”‚
â”‚  â”œâ”€ ğŸ§¹ í…ìŠ¤íŠ¸ / ì»¬ëŸ¼ ì •ê·œí™”
â”‚  â”‚  â”œâ”€ _norm_col
â”‚  â”‚  â””â”€ normalize_text
â”‚  â”‚
â”‚  â”œâ”€ ğŸ·ï¸ ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
â”‚  â”‚  â”œâ”€ rule_category
â”‚  â”‚  â”œâ”€ ai_category_batch
â”‚  â”‚  â””â”€ build_category
â”‚  â”‚
â”‚  â”œâ”€ ğŸ—‚ï¸ ì»¬ëŸ¼ ìë™ ë§¤í•‘
â”‚  â”‚  â”œâ”€ STANDARD_COLS
â”‚  â”‚  â”œâ”€ REQUIRED_COLS
â”‚  â”‚  â”œâ”€ SYNONYMS
â”‚  â”‚  â””â”€ auto_map_columns
â”‚  â”‚
â”‚  â”œâ”€ ğŸ”„ íƒ€ì… ë³€í™˜ / ê°’ ì •ë¦¬
â”‚  â”‚  â””â”€ coerce_types
â”‚  â”‚
â”‚  â””â”€ ğŸš€ ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ (ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸)
â”‚     â””â”€ preprocess_any_expense_df
â”‚
â””â”€ ğŸ¨ Streamlit UI
   â”œâ”€ st.set_page_config
   â”œâ”€ st.sidebar
   â”‚  â””â”€ st.file_uploader
   â””â”€ uploaded_file ì²˜ë¦¬
      â”œâ”€ íŒŒì¼ ì½ê¸° (csv / excel)
      â”œâ”€ preprocess_any_expense_df í˜¸ì¶œ
      â”œâ”€ ì§€í‘œ(metric) í‘œì‹œ
      â”œâ”€ ì°¨íŠ¸(plotly) ì‹œê°í™”
      â”œâ”€ AI ë¶„ì„ ê²°ê³¼ ì¶œë ¥
      â””â”€ ë¦¬í¬íŠ¸ ë‹¤ìš´ë¡œë“œ